INCLUDES = $(CAKEMLDIR)/developers $(HOLDIR)/examples/machine-code/hoare-triple $(HOLDIR)/examples/pl-semantics/lprefix_lub \
	$(HOLDIR)/examples/formal-languages/context-free

all: $(DEFAULT_TARGETS) README.md
.PHONY: all

README.md: $(CAKEMLDIR)/developers/readme_gen readmePrefix $(wildcard *Script.sml *Lib.sml *Syntax.sml *.lem *.c *.cml */readmePrefix) preamble.sml
	$(protect $(CAKEMLDIR)/developers/lint_source) . && $(protect $(CAKEMLDIR)/developers/readme_gen) preamble.sml

EXTRA_CLEANS = cakeml-heap

ifdef POLY
all: cakeml-heap

cakeml-heap: preamble.uo
	$(HOLDIR)/bin/hol buildheap -o $@ $<
endif
